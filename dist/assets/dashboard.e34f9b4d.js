window.addEventListener("DOMContentLoaded",o);let e=[],t=[],n=[],r=0;async function o(){const r=await fetch("https://foobar-examproject.herokuapp.com/");!function(r){(function(e){let t=new Date,n=new Date;n.setHours(22,0,0);let r=Math.abs(n-t);r=function(e){var t=(e=(e-e%1e3)/1e3)%60,n=(e=(e-t)/60)%60,r=(e-n)/60;t<10&&(t="0"+t);n<10&&(n="0"+n);r<10&&(r="0"+r);return r+":"+n+":"+t}(r),document.getElementById("countdown").innerHTML=r})(),0==document.querySelector(".bartender_content").children.length?function(e){document.querySelector(".bartender_content").innerHTML="",e.bartenders.forEach((t=>{const n=document.querySelector(".temp_bartenders").content.cloneNode(!0);n.querySelector(".each_bartender").src="../img/"+t.name+".png",n.querySelector(".bartender_name").textContent=t.name,n.querySelector(".bartender_statusdetail").textContent=t.statusDetail;let r=t.usingTap;n.querySelector(".bartender_usingtap").textContent=null===r?"Not pouring":e.taps[r].beer,n.querySelector(".bartender_servingcustomer").textContent=t.servingCustomer,document.querySelector(".bartender_content").appendChild(n)})),s()}(r):function(e){let t=document.querySelectorAll(".content");for(let n=0;n<t.length;n++){t[n].querySelector(".each_bartender").src="../img/"+e.bartenders[n].name+".png",t[n].querySelector(".bartender_name").textContent=e.bartenders[n].name,"receivePayment"===e.bartenders[n].statusDetail?t[n].querySelector(".bartender_statusdetail").textContent="Recieving payment":"pourBeer"===e.bartenders[n].statusDetail?t[n].querySelector(".bartender_statusdetail").textContent="Pouring beer":"waiting"===e.bartenders[n].statusDetail?t[n].querySelector(".bartender_statusdetail").textContent="Waiting":"startServing"===e.bartenders[n].statusDetail?t[n].querySelector(".bartender_statusdetail").textContent="Started serving":"reserveTap"===e.bartenders[n].statusDetail?t[n].querySelector(".bartender_statusdetail").textContent="Reserving tap":"releaseTap"===e.bartenders[n].statusDetail?t[n].querySelector(".bartender_statusdetail").textContent="Releasing tap":"endServing"===e.bartenders[n].statusDetail?t[n].querySelector(".bartender_statusdetail").textContent="Finished serving":"replaceKeg"===e.bartenders[n].statusDetail&&(t[n].querySelector(".bartender_statusdetail").textContent="Replacing Keg");let r=e.bartenders[n].usingTap;t[n].querySelector(".bartender_usingtap").textContent=null===r?"Not pouring":e.taps[r].beer,null===e.bartenders[n].servingCustomer?t[n].querySelector(".bartender_servingcustomer").textContent="Not serving":t[n].querySelector(".bartender_servingcustomer").textContent=e.bartenders[n].servingCustomer}}(r);(function(e){document.getElementById("beer_pictures").innerHTML="";let t=e.queue.length;document.getElementById("queue_number").innerHTML=t;for(let n=0;n<t;n++){if(n>=5){const e=document.createElement("p");return e.innerText="...",void document.getElementById("beer_pictures").appendChild(e)}const e=document.createElement("img");e.className="beer_picture",e.src="../img/beer-mug.png",document.getElementById("beer_pictures").appendChild(e)}})(r),function(r){let o=[];"orderIds"in sessionStorage&&(o=JSON.parse(sessionStorage.getItem("orderIds")));document.getElementById("order_queue").innerHTML="",document.getElementById("order_in_progress").innerHTML="",document.getElementById("order_finished").innerHTML="",t=r.queue,n=r.serving;let s=0;t.forEach((e=>{if(s<5){const t=document.createElement("p");o.includes(e.id)&&t.classList.add("highlight"),t.innerHTML=e.id,document.getElementById("order_queue").appendChild(t),s++}else if(5==s){const e=document.createElement("p");e.innerText="...",document.getElementById("order_queue").appendChild(e),s++}})),n.forEach((t=>{const n=document.createElement("p");o.includes(t.id)&&n.classList.add("highlight"),n.innerHTML=t.id,document.getElementById("order_in_progress").appendChild(n),e.includes(t.id)||e.unshift(t.id)}));let d=document.querySelector("#order_in_progress").childNodes,a=[];d.forEach((e=>{a.push(e.innerHTML)}));let l=0;e.forEach((e=>{if(!a.includes(e.toString())&&l<5){const t=document.createElement("p");o.includes(e)&&t.classList.add("highlight"),t.innerHTML=e,document.getElementById("order_finished").appendChild(t),l++}}))}(r),function(e){let t=e.taps;t.sort((function(e,t){return e.level-t.level}));let n=t.slice(0,3);for(let r=0;r<n.length;r++){let e="stock"+r+"_name",t="stock"+r+"_level",o="stock"+r+"_img",s="../img/kegs/"+n[r].beer+".png";document.getElementById(o).src=s,document.getElementById(e).innerHTML=n[r].beer,document.getElementById(t).innerHTML=n[r].level}}(r),setTimeout(o,1e3)}(await r.json())}function s(){let e=document.querySelectorAll(".content");r>=e.length&&(r=0);for(let t=0;t<e.length;t++)t==r?e[t].classList.remove("hide"):e[t].classList.add("hide");r++,setTimeout(s,1e4)}const d=document.querySelector("#hr"),a=document.querySelector("#mn"),l=document.querySelector("#sc");setInterval((()=>{let e=new Date,t=30*e.getHours(),n=6*e.getMinutes(),r=6*e.getSeconds();d.style.transform=`rotateZ(${t+n/12}deg)`,a.style.transform=`rotateZ(${n}deg)`,l.style.transform=`rotateZ(${r}deg)`}));
